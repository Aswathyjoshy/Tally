from django.shortcuts import render
from multiprocessing import context
from unicodedata import name
from django.http import JsonResponse
from django.shortcuts import render, redirect

from .models import *
from datetime import datetime, date, timedelta
from django.contrib.auth.models import User, auth
from django.views.decorators.csrf import csrf_exempt

# Create your views here.

def base(request):
    return render(request, 'base.html')

def index(request):
    return render(request, 'home.html')

def group(request):
    return render(request, 'groups.html')

def branch(request):
    return render(request, 'branch.html')

def ledger(request):
    return render(request, 'ledger.html')

def primary(request):
    return render(request, 'primarycost.html')

def costcat(request):
    return render(request, 'costcat.html')

def costcentr(request):
    return render(request, 'costcentr.html')

def voucher(request):
    return render(request, 'voucher.html')

def vouchpage(request):
    return render(request, 'vouchpage.html')

def currency(request):
    return render(request, 'currency.html')

def currency_alter(request):
    return render(request, 'currency_alter.html')

def stock_grp(request):
    return render(request, 'stock_grp.html')

def stock_items(request):
    return render(request, 'stock_items.html')

def stock_cat(request):
    return render(request, 'stock_cat.html')

def units(request):
    return render(request, 'units.html')

def godwn(request):
    return render(request, 'godwn.html')

def godwn_alter(request):
    return render(request, 'godwn_alter.html')

def emp_cat(request):
    return render(request, 'emp_cat.html')

def emp_cat_alter(request):
    return render(request, 'emp_cat_alter.html')

def emp_grp(request):
    return render(request, 'emp_grp.html')

def emp(request):
    return render(request, 'emp.html')

def atndnce_list(request):
    return render(request, 'atndnce_list.html')

def pay(request):
    return render(request, 'pay.html')

def profit(request):
    return render(request, 'profit.html')


@csrf_exempt
def create_group(request):
    if request.method == 'POST':
        gname = request.POST['gname']
        alia = request.POST['alia']
        if len(gname) <= 0:
            return JsonResponse({
                'status': 00
            })

        if len(alia) <= 0:
            alia = None
        else:
            pass

        under = request.POST['und']
        gp = request.POST['subled']
        nett = request.POST['nee']
        calc = request.POST['cal']
        meth = request.POST['meth']

        mdl = GroupModel(
            name=gname,
            alias=alia,
            under=under,
            gp_behaves_like_sub_ledger=gp,
            nett_debit_credit_bal_reporting=nett,
            used_for_calculation=calc,
            method_to_allocate_usd_purchase=meth,
        )
        mdl.save()
        # return redirect('index_view')
        return JsonResponse({
            'status': 1
        })












